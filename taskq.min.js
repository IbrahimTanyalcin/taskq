!function(t,e){if("object"!=typeof t.window&&"object"!=typeof t.document){var n=function(){},s={};t.window={requestAnimationFrame:n,addEventListener:n,document:{getElementById:n,querySelector:n,querySelectorAll:n,elementFromPoint:n,head:s,body:s}}}"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(t.window,t.window.document):e(t,t.document)}(this,function(t,e){var n=Math.random(),s=e.querySelector("script[src*='taskq.js']"),r=s&&s.getAttribute("global-name")||"taskq",i=s&&+s.getAttribute("data-min-pause")||0,a=t[r]=new function(){var e=[],s={},r=[],a=[],o=Math.random(),u=!1,c=!1;Object.defineProperties(this,{paused:{configurable:!1,enumerable:!1,get:function(){return u},set:function(t){return"object"!=typeof t||t.hash!==o?(console.log("You cannot set this manually"),!1):"boolean"==typeof t.value&&(u=t.value,!0)}},pause:{configurable:!1,enumerable:!1,get:function(){var t=!u;return this.paused={hash:o,value:!0},t}},resume:{configurable:!1,enumerable:!1,get:function(){var t=u;return this.paused={hash:o,value:!1},t}},running:{configurable:!1,enumerable:!1,get:function(){return c},set:function(t){return"object"!=typeof t||t.hash!==n?(console.log("You cannot set this manually"),!1):"boolean"==typeof t.value&&(c=t.value,!0)}}}),this.scriptLoading=!1,this.scriptLoaded=!1,this.scriptComplete=!0,this.flush=function(t){return"main"===t?(e=[],s={}):"script"===t&&(r=[]),this},this.export=function(t,e){return s[e=e||"default"]=t,this},this.push=function(t){return this.scriptLoading||this.scriptLoaded?r.push(t):e.push(t),this},this.perform=function(){return this.execute(this.sortTasks(e,!0),s,{origin:"main"}),this},this.promise=function(){return this.promise.promise?this.promise.promise:t.Promise&&Promise.constructor===Function?this.promise.promise=Promise.resolve():this.promise.promise=new this.__promise},this.minPause=i,this.thenable=function(e){var i=[],o=this,c=void 0,d=!1,h=!1,p=function(){};this.errored=!1,this.rejected=!1,this.catch=function(t){return"function"==typeof t&&(p=t),this},this.target=e,this.status={complete:!1},this.counter=0,this.next=void 0,this.resolver=Object.defineProperties(function(t){return!d&&((c=!!t)?(o.counter--,o.next=!0):o.rejected=!0,d=!0)},{init:{configurable:!1,enumerable:!1,get:function(){return h=!0}},value:{configurable:!1,enumerable:!1,get:function(){return c}}}),this.then=function(t){return this.counter++,i.push(function(){e.promise().then(function(){t(o.resolver),h||(o.counter--,o.next=!0)})}),this},this.execute=function(){return e.execute(r.length&&e.sortTasks(r),s,{origin:"script",status:o.status,flush:!0}),this},this.impender=function(){if(e.running||(e.running={hash:n,value:!0}),!u&&(o.errored||o.rejected||!o.counter&&o.status.complete))return e.running={hash:n,value:!1},e.scriptLoaded=!1,e.scriptComplete=!0,o.rejected&&p(),void(a.length&&a.shift()());u||!o.status.complete||void 0!==o.next&&!o.next||(h=!1,d=!1,c=void 0,o.next=!1,i.shift()()),t.requestAnimationFrame(o.impender)},this.impender()},this.queuePacker=function(t,e){var n=[],s=this;return a.push(function(){n.forEach(function(t,e){this.then(t)},s.load(t,e))}),new function(){this.then=function(t){return n.push(t),this}}}},o=a.constructor.prototype;return o.emptyArr=[],o.version=function(){return"2.3.0"},o.sortTasksUnstable=function(t,e,n,s,r){return t.map(function(t,e){return[t,t._taskqId,t._taskqWaitFor]}).sort(function(t,i){var a=t[1],u=i[1],c=t[2]||o.emptyArr,d=i[2]||o.emptyArr,h=t[0],p=i[0],f=void 0===h._taskqKSC?h._taskqKSC=!~n.indexOf(a):h._taskqKSC,l=void 0===h._taskqKEC?h._taskqKEC=!!~s.indexOf(a):h._taskqKEC,m=void 0===p._taskqKSC?p._taskqKSC=!~n.indexOf(u):p._taskqKSC,q=void 0===p._taskqKEC?p._taskqKEC=!!~s.indexOf(u):p._taskqKEC,k=f&&(l||c.some(function(t,e){return t===u||r[t]._taskqWaitFor&&~r[t]._taskqWaitFor.indexOf(u)})),_=m&&(q||d.some(function(t,e){return t===a||r[t]._taskqWaitFor&&~r[t]._taskqWaitFor.indexOf(a)}));return k*e+c.length-_*e-d.length}).map(function(t,e){return t[0]})},o.sortTasks=function(t,e){for(var n,s,r=Date.now(),i=1,a=t.length,u=Math.max.apply(null,t.map(function(t,e){return(t._taskqWaitFor||o.emptyArr).length}))+1,c=["start","init","begin","loadstart","loadStart"],d=["end","defer","finish","loadend","loadEnd"],h=t.reduce(function(t,e,n,s){return e._taskqId&&(t[e._taskqId]=e),t},{}),p=0,f=(t=this.sortTasksUnstable(t,u,c,d,h))[p],l=f._taskqId,m=f._taskqWaitFor||o.emptyArr;p<a;f=t[++p],l=f&&f._taskqId,m=f&&(f._taskqWaitFor||o.emptyArr)){n=void 0===f._taskqKSC?f._taskqKSC=!~c.indexOf(l):f._taskqKSC,s=void 0===f._taskqKEC?f._taskqKEC=!!~d.indexOf(l):f._taskqKEC;t:for(var q=p+1;q<a;++q){var k=t[q],_=k._taskqId,g=k._taskqWaitFor||o.emptyArr,v=void 0===k._taskqKSC?k._taskqKSC=!~c.indexOf(_):k._taskqKSC,y=void 0===k._taskqKEC?k._taskqKEC=!!~d.indexOf(_):k._taskqKEC,C=n&&(s||m.some(function(t,e){return t===_||h[t]._taskqWaitFor&&~h[t]._taskqWaitFor.indexOf(_)})),b=v&&(y||g.some(function(t,e){return t===l||h[t]._taskqWaitFor&&~h[t]._taskqWaitFor.indexOf(l)}));if(!this.areCircular(f,k,h)&&C*u+this.dependencyIsSubset(f,k,h)*m.length-b*u-g.length>0){t[p]=k,t[q]=f;var x=Math.max(0,q-8),O=Math.min(a,Math.max(0,q-8)+9);t=t.slice(0,x).concat(this.sortTasksUnstable(t.slice(x,O),u,c,d,h)).concat(t.slice(O)),++i,--p;break t}}}return e&&console.log("Semi stable sorting done in: "+i+" steps, ~"+(Date.now()-r)+"ms"),this.clearDependencyLedger(t),t},o.__promise=function(){this.then=function(e){return t.requestAnimationFrame(e),this}},o.execute=function(e,s,r){if(this.running||(this.running={hash:n,value:!0}),!e.length)return(void 0===r.flush||r.flush)&&this.flush(r.origin),r.status&&(r.status.complete=!0),void(this.running={hash:n,value:!1});var i=this,a=this.promise(),o=Date.now();a=a.then(function(n){t.requestAnimationFrame(function(){var n=e.shift(),a=0;if("function"==typeof n){var u=/function\s*\w*\s*\(((?:\s*\w+\s*\,?\s*)*)\)\s*\{/.exec(n.toString());n.apply(s[n._taskqScope]||t,u?u[1].replace(/\s+/g,"").split(",").map(function(t,e){return s[t]}):void 0)}else console.log("not a function ref");!i.paused&&(a=Date.now()-o)>=i.minPause&&("main"===r.origin&&i.scriptComplete||"script"===r.origin)?i.execute(e,s,r):i.wait(i.minPause-a,e,s,r)})})},o.wait=function(e,n,s,r){var i=this,a=0,o=function(u){a=a||u,!i.paused&&e+a-u<=0&&("main"===r.origin&&i.scriptComplete||"script"===r.origin)?i.execute(n,s,r):t.requestAnimationFrame(o)};t.requestAnimationFrame(o)},o.load=function(t,n){if(!this.scriptComplete)return this.queuePacker(t,n);n=n||e.head;var s=this,r=n.querySelector("script[src*='"+t.replace(/\?.*$/gi,"")+"']"),i=e.createElement("script"),a=new this.thenable(s);return this.scriptLoading=!0,this.scriptComplete=!1,i.async=!0,i.onload=function(){s.scriptLoading=!1,s.scriptLoaded=!0,a.execute()},i.onerror=function(){a.errored=!0},i.src=t,r?n.replaceChild(i,r):n.appendChild(i),a},o.dependencyIsSubset=function(t,e,n,s){if(t._taskqDependencyIsSubset=t._taskqDependencyIsSubset||[],t._taskqDependencyIsNotSubset=t._taskqDependencyIsNotSubset||[],~t._taskqDependencyIsSubset.indexOf(e))return!0;if(~t._taskqDependencyIsNotSubset.indexOf(e))return!1;s=s||[];var r=t._taskqWaitFor||o.emptyArr,i=e._taskqWaitFor||o.emptyArr;if(r.length){if(i.length){if(~s.indexOf(e))return;if(r.map(function(t,e){return i.indexOf(t)}).some(function(t,e){return!~t})){var a=i.map(function(e,r){return n[e]&&this.dependencyIsSubset(t,n[e],n,s)},this).some(function(t,e){return!0===t});return a?t._taskqDependencyIsSubset.push(e):t._taskqDependencyIsNotSubset.push(e),a}return t._taskqDependencyIsSubset.push(e),s.push(e),!0}return t._taskqDependencyIsNotSubset.push(e),s.push(e),!1}return t._taskqDependencyIsNotSubset.push(e),!1},o.dependsOn=function(t,e,n,s){if(t._taskqDependsOn=t._taskqDependsOn||[],t._taskqNotDependsOn=t._taskqNotDependsOn||[],~t._taskqDependsOn.indexOf(e))return!0;if(~t._taskqNotDependsOn.indexOf(e))return!1;var r=t._taskqWaitFor||o.emptyArr;if(void 0===s&&(s=[])&&!r.length)return t._taskqNotDependsOn.push(e),!1;if(!~s.indexOf(e)){if(~r.map(function(t,e){return n[t]}).indexOf(e))return t._taskqDependsOn.push(e),s.push(e),!0;var i=r.map(function(t,r){return n[t]&&this.dependsOn(n[t],e,n,s)},this).some(function(t,e){return!0===t});return i?t._taskqDependsOn.push(e):t._taskqNotDependsOn.push(e),i}},o.areCircular=function(t,e,n){if(t._taskqCircular=t._taskqCircular||[],t._taskqNotCircular=t._taskqNotCircular||[],e._taskqCircular=e._taskqCircular||[],e._taskqNotCircular=e._taskqNotCircular||[],~t._taskqCircular.indexOf(e))return!0;if(~t._taskqNotCircular.indexOf(e))return!1;var s=this.dependsOn(t,e,n)&&this.dependsOn(e,t,n);return s?(t._taskqCircular.push(e),e._taskqCircular.push(t),console.log("Circular dependency detected, consider revising "+(t._taskqId||t.toString().slice(0,30))+" and "+(e._taskqId||e.toString().slice(0,30)))):(t._taskqNotCircular.push(e),e._taskqNotCircular.push(t)),s},o.clearDependencyLedger=function(t){var e=this;return t.forEach(function(t,n){e.deleteEnum(t,this)},["_taskqDependencyIsSubset","_taskqDependencyIsNotSubset","_taskqDependsOn","_taskqNotDependsOn","_taskqCircular","_taskqNotCircular"]),this},o.deleteEnum=function(t,e){return t&&"object"==typeof t&&e instanceof Array&&e.forEach(function(e,n){delete t[e]}),this},t.addEventListener("load",function(){a.perform()},!1),a});